{"version":3,"sources":["../source/SegmentedControl.js"],"names":["React","PureComponent","PropTypes","ReactDOM","classNames","Segmented_control","state","on_key_down","bind","fallback","props","setState","javascript","disabled","options","indicateInvalid","error","style","className","markup","map","option","index","render_button","render_static","value","selected","first","last","length","ref","undefined","chooser","label","render_static_option","name","onChange","findDOMNode","button_0","focus","event","ctrlKey","altKey","shiftKey","metaKey","keyCode","preventDefault","previous_option_index","next_option_index","i","propTypes","arrayOf","shape","string","isRequired","bool","any","func","object","defaultProps"],"mappings":";;;;;AAAA,OAAOA,KAAP,IAAgBC,aAAhB,QAAqC,OAArC;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,OAAOC,QAAP,MAAqB,WAArB;AACA,OAAOC,UAAP,MAAuB,YAAvB;;IAEqBC,iB;;;AAgDpB,8BACA;AAAA;;AAAA;;AAAA,QA/CAC,KA+CA,GA/CQ,EA+CR;;;AAGC,QAAKC,WAAL,GAAmB,MAAKA,WAAL,CAAiBC,IAAjB,OAAnB;AAHD;AAIC;;AAED;;;;;sCAEA;AAAA,OACSC,QADT,GACsB,KAAKC,KAD3B,CACSD,QADT;;;AAGC,OAAIA,QAAJ,EACA;AACC,SAAKE,QAAL,CAAc,EAAEC,YAAY,IAAd,EAAd;AACA;AACD;;;2BAGD;AAAA;;AAAA,gBAWG,KAAKF,KAXR;AAAA,OAGEG,QAHF,UAGEA,QAHF;AAAA,OAIEC,OAJF,UAIEA,OAJF;AAAA,OAKEL,QALF,UAKEA,QALF;AAAA,OAMEM,eANF,UAMEA,eANF;AAAA,OAOEC,KAPF,UAOEA,KAPF;AAAA,OAQEC,KARF,UAQEA,KARF;AAAA,OASEC,SATF,UASEA,SATF;;;AAaC,OAAMC,SAEL;AAAA;AAAA;AACC,gBAAY,KAAKZ,WADlB;AAEC,gBAAYH,WAAW,yBAAX,EACZ;AACC,oBAAsCK,QADvC;AAEC,2CAAsCI;AAFvC,MADY,EAKZK,SALY,CAFb;AAQC,YAAQD,KART;AAUC;AAAA;AAAA,OAAK,WAAU,aAAf;AACGH,aAAQM,GAAR,CAAY,UAACC,MAAD,EAASC,KAAT;AAAA,aAAmB,OAAKC,aAAL,CAAmBF,MAAnB,EAA2BC,KAA3B,CAAnB;AAAA,MAAZ;AADH,KAVD;AAcGb,gBAAY,CAAC,KAAKH,KAAL,CAAWM,UAAxB,IAAsC,KAAKY,aAAL,EAdzC;AAgBGT,uBAAmBC,KAAnB,IAA4B;AAAA;AAAA,OAAK,WAAU,mBAAf;AAAqCA;AAArC;AAhB/B,IAFD;;AAsBA,UAAOG,MAAP;AACA;;;gCAEaE,M,EAAQC,K,EACtB;AAAA;;AAAA,iBACsC,KAAKZ,KAD3C;AAAA,OACSI,OADT,WACSA,OADT;AAAA,OACkBW,KADlB,WACkBA,KADlB;AAAA,OACyBZ,QADzB,WACyBA,QADzB;;;AAGC,OAAMa,WAAWD,UAAUJ,OAAOI,KAAlC;;AAEA,OAAME,QAAQL,UAAU,CAAxB;AACA,OAAMM,OAAQN,UAAUR,QAAQe,MAAR,GAAiB,CAAzC;;AAEA,OAAMV,SAEL;AAAA;AAAA;AACC,UAAME,OAAOI,KADd;AAEC,UAAM;AAAA,aAAO,mBAAeH,KAAf,IAA0BQ,IAAjC;AAAA,MAFP;AAGC,WAAK,QAHN;AAIC,eAAWR,UAAU,CAAV,GAAcS,SAAd,GAA0B,IAJtC;AAKC,eAAWlB,QALZ;AAMC,cAAU,KAAKmB,OAAL,CAAaX,OAAOI,KAApB,CANX;AAOC,gBAAYrB,WAEX,iCAFW,EAGX;AACC,mDAA8CsB,QAD/C;AAEC;AACA,mDAA8Cb,QAH/C;AAIC;AACA,gDAA8Cc,KAL/C;AAMC,+CAA8CC,IAN/C;AAOC,iDAA8C,CAACD,KAAD,IAAU,CAACC;AAP1D,MAHW,CAPb;AAoBGP,WAAOY;AApBV,IAFD;;AA0BA,UAAOd,MAAP;AACA;;AAED;;;;kCAEA;AAAA;;AAAA,OACSL,OADT,GACqB,KAAKJ,KAD1B,CACSI,OADT;;;AAGC,OAAMK,SAEL;AAAA;AAAA,MAAK,WAAU,sBAAf;AACGL,YAAQM,GAAR,CAAY,UAACC,MAAD,EAASC,KAAT;AAAA,YAAmB,OAAKY,oBAAL,CAA0Bb,MAA1B,EAAkCC,KAAlC,CAAnB;AAAA,KAAZ;AADH,IAFD;;AAOA,UAAOH,MAAP;AACA;;;uCAEoBE,M,EAAQC,K,EAC7B;AAAA,iBACkC,KAAKZ,KADvC;AAAA,OACSI,OADT,WACSA,OADT;AAAA,OACkBqB,IADlB,WACkBA,IADlB;AAAA,OACwBV,KADxB,WACwBA,KADxB;;;AAGC,OAAME,QAAQL,UAAU,CAAxB;AACA,OAAMM,OAAQN,UAAUR,QAAQe,MAAR,GAAiB,CAAzC;;AAEA,OAAMV,SAEL;AAAA;AAAA;AACC,UAAME,OAAOI,KADd;AAEC,gBAAYrB,WAAW,iCAAX,EACZ;AACC,gDAA4CuB,KAD7C;AAEC,+CAA4CC,IAF7C;AAGC,iDAA4C,CAACD,KAAD,IAAU,CAACC;AAHxD,MADY,CAFb;AAQC;AACC,WAAK,OADN;AAEC,WAAOO,IAFR;AAGC,cAAUV,UAAUJ,OAAOI,KAH5B,GARD;AAYGJ,WAAOY;AAZV,IAFD;;AAkBA,UAAOd,MAAP;AACA;;;0BAEOM,K,EACR;AAAA;;AACC,UAAO,iBACP;AAAA,kBACgC,OAAKf,KADrC;AAAA,QACSG,QADT,WACSA,QADT;AAAA,QACmBuB,QADnB,WACmBA,QADnB;;;AAGC,QAAIvB,QAAJ,EACA;AACC;AACA;;AAEDuB,aAASX,KAAT;AACA,IAVD;AAWA;;;0BAGD;AACCtB,YAASkC,WAAT,CAAqB,KAAKC,QAA1B,EAAoCC,KAApC;AACA;;;8BAEWC,K,EACZ;AACC,OAAIA,MAAMC,OAAN,IAAiBD,MAAME,MAAvB,IAAiCF,MAAMG,QAAvC,IAAmDH,MAAMI,OAA7D,EACA;AACC;AACA;;AAJF,iBAM+B,KAAKlC,KANpC;AAAA,OAMS0B,QANT,WAMSA,QANT;AAAA,OAMmBtB,OANnB,WAMmBA,OANnB;;;AAQC,WAAQ0B,MAAMK,OAAd;AAEC;AACA,SAAK,EAAL;AACCL,WAAMM,cAAN;;AAEA,SAAMC,wBAAwB,KAAKA,qBAAL,EAA9B;;AAEA,SAAIA,0BAA0BhB,SAA9B,EACA;AACC;AACA;AACA;AACA;AACA,uBAAegB,qBAAf,EAAwCR,KAAxC;;AAEA;AACA,aAAOH,SAAStB,QAAQiC,qBAAR,EAA+BtB,KAAxC,CAAP;AACA;;AAED;;AAED;AACA,SAAK,EAAL;AACCe,WAAMM,cAAN;;AAEA,SAAME,oBAAoB,KAAKA,iBAAL,EAA1B;;AAEA,SAAIA,sBAAsBjB,SAA1B,EACA;AACC;AACA;AACA;AACA;AACA,uBAAeiB,iBAAf,EAAoCT,KAApC;;AAEA;AACA,aAAOH,SAAStB,QAAQkC,iBAAR,EAA2BvB,KAApC,CAAP;AACA;;AAED;AAxCF;AA0CA;;AAED;;;;0CAEA;AAAA,iBAC4B,KAAKf,KADjC;AAAA,OACSI,OADT,WACSA,OADT;AAAA,OACkBW,KADlB,WACkBA,KADlB;;;AAGC,OAAIwB,IAAI,CAAR;AACA,UAAOA,IAAInC,QAAQe,MAAnB,EACA;AACC,QAAIf,QAAQmC,CAAR,EAAWxB,KAAX,KAAqBA,KAAzB,EACA;AACC,SAAIwB,IAAI,CAAJ,IAAS,CAAb,EACA;AACC,aAAOA,IAAI,CAAX;AACA;AACD;AACDA;AACA;AACD;;AAED;;;;sCAEA;AAAA,iBAC4B,KAAKvC,KADjC;AAAA,OACSI,OADT,WACSA,OADT;AAAA,OACkBW,KADlB,WACkBA,KADlB;;;AAGC,OAAIwB,IAAI,CAAR;AACA,UAAOA,IAAInC,QAAQe,MAAnB,EACA;AACC,QAAIf,QAAQmC,CAAR,EAAWxB,KAAX,KAAqBA,KAAzB,EACA;AACC,SAAIwB,IAAI,CAAJ,GAAQnC,QAAQe,MAApB,EACA;AACC,aAAOoB,IAAI,CAAX;AACA;AACD;AACDA;AACA;AACD;;;;EAvS6ChD,a;;AAA1BI,iB,CAIb6C,S,GACP;AACC;AACApC,UAAUZ,UAAUiD,OAAV,CAETjD,UAAUkD,KAAV,CACC;AACA;AACA3B,SAAOvB,UAAUmD,MAAV,CAAiBC,UAFxB;AAGA;AACArB,SAAO/B,UAAUmD,MAAV,CAAiBC;AAJxB,EADD,CAFS,EAUTA,UAZF;;AAcC;AACAnB,OAAejC,UAAUmD,MAf1B;;AAiBC;AACAxC,WAAeX,UAAUqD,IAlB1B;;AAoBC;AACA9B,QAAevB,UAAUsD,GArB1B;;AAuBC;AACApB,WAAelC,UAAUuD,IAAV,CAAeH,UAxB/B;;AA0BC;AACA;AACA;AACA7C,WAAYP,UAAUqD,IAAV,CAAeD,UA7B5B;;AA+BC;AACApC,YAAehB,UAAUmD,MAhC1B;;AAkCC;AACApC,QAAef,UAAUwD;AAnC1B,C;AALoBrD,iB,CA2CbsD,Y,GACP;AACClD,WAAW;AADZ,C;eA5CoBJ,iB","file":"SegmentedControl.js","sourcesContent":["import React, { PureComponent } from 'react'\nimport PropTypes from 'prop-types'\nimport ReactDOM from 'react-dom'\nimport classNames from 'classnames'\n\nexport default class Segmented_control extends PureComponent\n{\n\tstate = {}\n\n\tstatic propTypes =\n\t{\n\t\t// A list of selectable options\n\t\toptions : PropTypes.arrayOf\n\t\t(\n\t\t\tPropTypes.shape\n\t\t\t({\n\t\t\t\t// Option value\n\t\t\t\tvalue: PropTypes.string.isRequired,\n\t\t\t\t// Option label\n\t\t\t\tlabel: PropTypes.string.isRequired\n\t\t\t})\n\t\t)\n\t\t.isRequired,\n\n\t\t// HTML form input `name` attribute\n\t\tname         : PropTypes.string,\n\n\t\t// If `true` then will be disabled\n\t\tdisabled     : PropTypes.bool,\n\n\t\t// The selected option value\n\t\tvalue        : PropTypes.any,\n\n\t\t// Is called when an option is selected\n\t\tonChange     : PropTypes.func.isRequired,\n\n\t\t// (exotic use case)\n\t\t// Falls back to a plain HTML input\n\t\t// when javascript is disabled (e.g. Tor)\n\t\tfallback  : PropTypes.bool.isRequired,\n\n\t\t// CSS class\n\t\tclassName    : PropTypes.string,\n\n\t\t// CSS style object\n\t\tstyle        : PropTypes.object\n\t}\n\n\tstatic defaultProps =\n\t{\n\t\tfallback : false\n\t}\n\n\tconstructor()\n\t{\n\t\tsuper()\n\n\t\tthis.on_key_down = this.on_key_down.bind(this)\n\t}\n\n\t// Client side rendering, javascript is enabled\n\tcomponentDidMount()\n\t{\n\t\tconst { fallback } = this.props\n\n\t\tif (fallback)\n\t\t{\n\t\t\tthis.setState({ javascript: true })\n\t\t}\n\t}\n\n\trender()\n\t{\n\t\tconst\n\t\t{\n\t\t\tdisabled,\n\t\t\toptions,\n\t\t\tfallback,\n\t\t\tindicateInvalid,\n\t\t\terror,\n\t\t\tstyle,\n\t\t\tclassName\n\t\t}\n\t\t= this.props\n\n\t\tconst markup =\n\t\t(\n\t\t\t<div\n\t\t\t\tonKeyDown={ this.on_key_down }\n\t\t\t\tclassName={ classNames('rrui__segmented-control',\n\t\t\t\t{\n\t\t\t\t\t'rrui__rich'                        : fallback,\n\t\t\t\t\t'rrui__segmented-control--disabled' : disabled\n\t\t\t\t},\n\t\t\t\tclassName) }\n\t\t\t\tstyle={ style }>\n\n\t\t\t\t<div className=\"rrui__input\">\n\t\t\t\t\t{ options.map((option, index) => this.render_button(option, index)) }\n\t\t\t\t</div>\n\n\t\t\t\t{ fallback && !this.state.javascript && this.render_static() }\n\n\t\t\t\t{ indicateInvalid && error && <div className=\"rrui__input-error\">{ error }</div> }\n\t\t\t</div>\n\t\t)\n\n\t\treturn markup\n\t}\n\n\trender_button(option, index)\n\t{\n\t\tconst { options, value, disabled } = this.props\n\n\t\tconst selected = value === option.value\n\n\t\tconst first = index === 0\n\t\tconst last  = index === options.length - 1\n\n\t\tconst markup =\n\t\t(\n\t\t\t<button\n\t\t\t\tkey={ option.value }\n\t\t\t\tref={ ref => this[`button_${index}`] = ref }\n\t\t\t\ttype=\"button\"\n\t\t\t\ttabIndex={ index === 0 ? undefined : '-1' }\n\t\t\t\tdisabled={ disabled }\n\t\t\t\tonClick={ this.chooser(option.value) }\n\t\t\t\tclassName={ classNames\n\t\t\t\t(\n\t\t\t\t\t'rrui__segmented-control__option',\n\t\t\t\t\t{\n\t\t\t\t\t\t'rrui__segmented-control__option--selected' : selected,\n\t\t\t\t\t\t// CSS selector performance optimization\n\t\t\t\t\t\t'rrui__segmented-control__option--disabled' : disabled,\n\t\t\t\t\t\t// Ordering\n\t\t\t\t\t\t'rrui__segmented-control__option--first'    : first,\n\t\t\t\t\t\t'rrui__segmented-control__option--last'     : last,\n\t\t\t\t\t\t'rrui__segmented-control__option--middle'   : !first && !last\n\t\t\t\t\t}\n\t\t\t\t) }>\n\t\t\t\t{ option.label }\n\t\t\t</button>\n\t\t)\n\n\t\treturn markup\n\t}\n\n\t// supports disabled javascript\n\trender_static()\n\t{\n\t\tconst { options } = this.props\n\n\t\tconst markup =\n\t\t(\n\t\t\t<div className=\"rrui__rich__fallback\">\n\t\t\t\t{ options.map((option, index) => this.render_static_option(option, index)) }\n\t\t\t</div>\n\t\t)\n\n\t\treturn markup\n\t}\n\n\trender_static_option(option, index)\n\t{\n\t\tconst { options, name, value } = this.props\n\n\t\tconst first = index === 0\n\t\tconst last  = index === options.length - 1\n\n\t\tconst markup =\n\t\t(\n\t\t\t<span\n\t\t\t\tkey={ option.value }\n\t\t\t\tclassName={ classNames('rrui__segmented-control__option',\n\t\t\t\t{\n\t\t\t\t\t'rrui__segmented-control__option--first'  : first,\n\t\t\t\t\t'rrui__segmented-control__option--last'   : last,\n\t\t\t\t\t'rrui__segmented-control__option--middle' : !first && !last\n\t\t\t\t}) }>\n\t\t\t\t<input\n\t\t\t\t\ttype=\"radio\"\n\t\t\t\t\tname={ name }\n\t\t\t\t\tchecked={ value === option.value }/>\n\t\t\t\t{ option.label }\n\t\t\t</span>\n\t\t)\n\n\t\treturn markup\n\t}\n\n\tchooser(value)\n\t{\n\t\treturn event =>\n\t\t{\n\t\t\tconst { disabled, onChange } = this.props\n\n\t\t\tif (disabled)\n\t\t\t{\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tonChange(value)\n\t\t}\n\t}\n\n\tfocus()\n\t{\n\t\tReactDOM.findDOMNode(this.button_0).focus()\n\t}\n\n\ton_key_down(event)\n\t{\n\t\tif (event.ctrlKey || event.altKey || event.shiftKey || event.metaKey)\n\t\t{\n\t\t\treturn\n\t\t}\n\n\t\tconst { onChange, options } = this.props\n\n\t\tswitch (event.keyCode)\n\t\t{\n\t\t\t// Select the previous option (if present) on left arrow\n\t\t\tcase 37:\n\t\t\t\tevent.preventDefault()\n\n\t\t\t\tconst previous_option_index = this.previous_option_index()\n\n\t\t\t\tif (previous_option_index !== undefined)\n\t\t\t\t{\n\t\t\t\t\t// Focus the option <button/> so that\n\t\t\t\t\t// a subsequent \"Spacebar\" keyDown\n\t\t\t\t\t// doesn't select the previously selected\n\t\t\t\t\t// option (e.g. the first one)\n\t\t\t\t\tthis[`button_${previous_option_index}`].focus()\n\n\t\t\t\t\t// Change the `value`\n\t\t\t\t\treturn onChange(options[previous_option_index].value)\n\t\t\t\t}\n\n\t\t\t\treturn\n\n\t\t\t// Select the next option (if present) on right arrow\n\t\t\tcase 39:\n\t\t\t\tevent.preventDefault()\n\n\t\t\t\tconst next_option_index = this.next_option_index()\n\n\t\t\t\tif (next_option_index !== undefined)\n\t\t\t\t{\n\t\t\t\t\t// Focus the option <button/> so that\n\t\t\t\t\t// a subsequent \"Spacebar\" keyDown\n\t\t\t\t\t// doesn't select the previously selected\n\t\t\t\t\t// option (e.g. the first one)\n\t\t\t\t\tthis[`button_${next_option_index}`].focus()\n\n\t\t\t\t\t// Change the `value`\n\t\t\t\t\treturn onChange(options[next_option_index].value)\n\t\t\t\t}\n\n\t\t\t\treturn\n\t\t}\n\t}\n\n\t// Get the previous option index (relative to the currently selected option)\n\tprevious_option_index()\n\t{\n\t\tconst { options, value } = this.props\n\n\t\tlet i = 0\n\t\twhile (i < options.length)\n\t\t{\n\t\t\tif (options[i].value === value)\n\t\t\t{\n\t\t\t\tif (i - 1 >= 0)\n\t\t\t\t{\n\t\t\t\t\treturn i - 1\n\t\t\t\t}\n\t\t\t}\n\t\t\ti++\n\t\t}\n\t}\n\n\t// Get the next option index (relative to the currently selected option)\n\tnext_option_index()\n\t{\n\t\tconst { options, value } = this.props\n\n\t\tlet i = 0\n\t\twhile (i < options.length)\n\t\t{\n\t\t\tif (options[i].value === value)\n\t\t\t{\n\t\t\t\tif (i + 1 < options.length)\n\t\t\t\t{\n\t\t\t\t\treturn i + 1\n\t\t\t\t}\n\t\t\t}\n\t\t\ti++\n\t\t}\n\t}\n}"]}