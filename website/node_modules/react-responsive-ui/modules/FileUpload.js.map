{"version":3,"sources":["../source/FileUpload.js"],"names":["React","PureComponent","PropTypes","classNames","File_upload","on_file_selected","bind","on_click","on_input_click","on_input_change","event","stopPropagation","props","action","multiple","data","target","files","value","disabled","onClick","preventDefault","file_upload","click","style","className","children","markup","ref","input_style","propTypes","func","isRequired","bool","node","string","object","display"],"mappings":";;;;;AAAA,OAAOA,KAAP,IAAgBC,aAAhB,QAAqC,OAArC;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,OAAOC,UAAP,MAAuB,YAAvB;;IAEqBC,W;;;AA0BpB,wBACA;AAAA;;AAAA;;AAGC,QAAKC,gBAAL,GAAwB,MAAKA,gBAAL,CAAsBC,IAAtB,OAAxB;AACA,QAAKC,QAAL,GAAwB,MAAKA,QAAL,CAAcD,IAAd,OAAxB;AACA,QAAKE,cAAL,GAAwB,MAAKA,cAAL,CAAoBF,IAApB,OAAxB;AACA,QAAKG,eAAL,GAAwB,MAAKA,eAAL,CAAqBH,IAArB,OAAxB;AAND;AAOC;;;;iCAEcI,K,EACf;AACCA,SAAMC,eAAN;AACA;;;kCAEeD,K,EAChB;AACC,QAAKL,gBAAL,CAAsBK,KAAtB;AACA;;;mCAEgBA,K,EACjB;AAAA,gBAC8B,KAAKE,KADnC;AAAA,OACSC,MADT,UACSA,MADT;AAAA,OACiBC,QADjB,UACiBA,QADjB;;;AAGC,OAAIC,OAAOL,MAAMM,MAAN,CAAaC,KAAxB;;AAEA,OAAI,CAACH,QAAL,EACA;AACCC,WAAOA,KAAK,CAAL,CAAP;AACA;;AAEDF,UAAOE,IAAP;;AAEA;AACA;AACA;AACAL,SAAMM,MAAN,CAAaE,KAAb,GAAqB,IAArB;AACA;;;2BAEQR,K,EACT;AAAA,iBAC+B,KAAKE,KADpC;AAAA,OACSO,QADT,WACSA,QADT;AAAA,OACmBC,OADnB,WACmBA,OADnB;;;AAGC,OAAID,QAAJ,EACA;AACC,WAAOT,MAAMW,cAAN,EAAP;AACA;;AAED,OAAID,OAAJ,EACA;AACCA;AACA;;AAED,QAAKE,WAAL,CAAiBC,KAAjB;AACA;;;2BAGD;AAAA;;AAAA,iBAQG,KAAKX,KARR;AAAA,OAGEO,QAHF,WAGEA,QAHF;AAAA,OAIEK,KAJF,WAIEA,KAJF;AAAA,OAKEC,SALF,WAKEA,SALF;AAAA,OAMEC,QANF,WAMEA,QANF;;;AAUC,OAAMC,SAEL;AAAA;AAAA;AACC,YAAQH,KADT;AAEC,gBAAYrB,WAAW,mBAAX,EAAgCsB,SAAhC,EACZ;AACC,qCAAgCN;AADjC,MADY,CAFb;AAMC,cAAU,KAAKZ,QANhB;AAQC;AACC,WAAK,MADN;AAEC,UAAM;AAAA,aAAO,OAAKe,WAAL,GAAmBM,IAA1B;AAAA,MAFP;AAGC,UAAI,YAHL;AAIC,YAAQC,WAJT;AAKC,cAAU,KAAKtB,QALhB;AAMC,eAAW,KAAKE,eANjB,GARD;AAgBGiB;AAhBH,IAFD;;AAsBA,UAAOC,MAAP;AACA;;;;EApHuC1B,a;;AAApBG,W,CAEb0B,S,GACP;AACC;AACAjB,SAAYX,UAAU6B,IAAV,CAAeC,UAF5B;;AAIC;AACAlB,WAAYZ,UAAU+B,IALvB;;AAOC;AACAd,WAAYjB,UAAU+B,IARvB;;AAUC;AACAb,UAAYlB,UAAU6B,IAXvB;;AAaC;AACAL,WAAYxB,UAAUgC,IAdvB;;AAgBC;AACAT,YAAYvB,UAAUiC,MAjBvB;;AAmBC;AACAX,QAAYtB,UAAUkC;AApBvB,C;eAHoBhC,W;;;AAuHrB,IAAMyB,cACN;AACCQ,UAAS;AADV,CADA","file":"FileUpload.js","sourcesContent":["import React, { PureComponent } from 'react'\nimport PropTypes from 'prop-types'\nimport classNames from 'classnames'\n\nexport default class File_upload extends PureComponent\n{\n\tstatic propTypes =\n\t{\n\t\t// On file chosen handler\n\t\taction    : PropTypes.func.isRequired,\n\n\t\t// Allows choosing multiple files if `true`\n\t\tmultiple  : PropTypes.bool,\n\n\t\t// Disables the file input\n\t\tdisabled  : PropTypes.bool,\n\n\t\t// `onClick` handler\n\t\tonClick   : PropTypes.func,\n\n\t\t// The clickable area, like \"Click here to choose a file\"\n\t\tchildren  : PropTypes.node,\n\n\t\t// CSS class\n\t\tclassName : PropTypes.string,\n\n\t\t// CSS style object\n\t\tstyle     : PropTypes.object\n\t}\n\n\tconstructor()\n\t{\n\t\tsuper()\n\n\t\tthis.on_file_selected = this.on_file_selected.bind(this)\n\t\tthis.on_click         = this.on_click.bind(this)\n\t\tthis.on_input_click   = this.on_input_click.bind(this)\n\t\tthis.on_input_change  = this.on_input_change.bind(this)\n\t}\n\n\ton_input_click(event)\n\t{\n\t\tevent.stopPropagation()\n\t}\n\n\ton_input_change(event)\n\t{\n\t\tthis.on_file_selected(event)\n\t}\n\n\ton_file_selected(event)\n\t{\n\t\tconst { action, multiple } = this.props\n\n\t\tlet data = event.target.files\n\n\t\tif (!multiple)\n\t\t{\n\t\t\tdata = data[0]\n\t\t}\n\n\t\taction(data)\n\n\t\t// reset the selected file\n\t\t// so that onChange would trigger again\n\t\t// even with the same file\n\t\tevent.target.value = null\n\t}\n\n\ton_click(event)\n\t{\n\t\tconst { disabled, onClick } = this.props\n\n\t\tif (disabled)\n\t\t{\n\t\t\treturn event.preventDefault()\n\t\t}\n\n\t\tif (onClick)\n\t\t{\n\t\t\tonClick()\n\t\t}\n\n\t\tthis.file_upload.click()\n\t}\n\n\trender()\n\t{\n\t\tconst\n\t\t{\n\t\t\tdisabled,\n\t\t\tstyle,\n\t\t\tclassName,\n\t\t\tchildren\n\t\t}\n\t\t= this.props\n\n\t\tconst markup =\n\t\t(\n\t\t\t<div\n\t\t\t\tstyle={ style }\n\t\t\t\tclassName={ classNames('rrui__file-upload', className,\n\t\t\t\t{\n\t\t\t\t\t'rrui__file-upload--disabled' : disabled\n\t\t\t\t}) }\n\t\t\t\tonClick={ this.on_click }>\n\n\t\t\t\t<input\n\t\t\t\t\ttype=\"file\"\n\t\t\t\t\tref={ ref => this.file_upload = ref }\n\t\t\t\t\tkey=\"file_input\"\n\t\t\t\t\tstyle={ input_style }\n\t\t\t\t\tonClick={ this.on_click }\n\t\t\t\t\tonChange={ this.on_input_change }/>\n\n\t\t\t\t{ children }\n\t\t\t</div>\n\t\t)\n\n\t\treturn markup\n\t}\n}\n\nconst input_style =\n{\n\tdisplay: 'none'\n}"]}