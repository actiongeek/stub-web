{"version":3,"sources":["../source/DatePicker.js"],"names":["DatePicker","state","expanded","selected_day","on_input_focus","event","onFocus","props","expand","value","format","onToggle","setState","month","undefined","text_value","format_date","normalize_value","Date","on_key_down_in_container","ctrlKey","altKey","shiftKey","metaKey","keyCode","preventDefault","input","focus","collapse","on_input_key_down","on_input_change","onChange","noon","utc","target","trim","trim_invalid_part","parse_date","calendar","showMonth","on_day_click","getFullYear","getMonth","getDate","convert_to_utc_timezone","on_calendar_key_down","document_clicked","container","findDOMNode","contains","on_month_selected","on_blur","onBlur","relatedTarget","currentTarget","_event","stopPropagation","document","addEventListener","querySelectorAll","button","removeAttribute","removeEventListener","indicateInvalid","error","id","selectYearsIntoPast","selectYearsIntoFuture","firstDayOfWeek","disabled","required","label","placeholder","closeButtonLabel","className","style","captionElement","ref","should_indicate_invalid","propTypes","string","number","isRequired","instanceOf","func","bool","name","object","defaultProps","parse_date_custom","date","format_date_custom","year","extract","current_year","current_year_century","day","console","isNaN","getTime","template","piece","starts_at","indexOf","corresponds_to_template","parseInt","slice","length","i","is_a_digit","text","replace","pad_with_zeroes","String","target_length","YearMonthSelector","localeUtils","selectedDay","from_year","to_year","years","Array","selected_year","unshift","push","months","getMonths","handleChange","parentNode","firstChild","lastChild","markup","map","getTimezoneOffset"],"mappings":"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","file":"DatePicker.js","sourcesContent":["// Derived from `react-day-picker` example\n// http://react-day-picker.js.org/examples/?overlay\n\nimport React, { PureComponent } from 'react'\nimport PropTypes from 'prop-types'\nimport ReactDOM from 'react-dom'\nimport DayPicker, { DateUtils } from 'react-day-picker'\nimport classNames from 'classnames'\n\n// // Moment.js takes 161 KB of space (minified) which is too much\n// import moment from 'moment'\n\n// // `date-fns` would be a better alternative to moment\n// // but it doesn't support templated date parsing\n// // until version `2.0.0` of it is released.\n// // https://github.com/date-fns/date-fns/issues/347\n// import parse_date_date_fns from 'date-fns/parse'\n// import format_date_date_fns from 'date-fns/format'\n\nexport default class DatePicker extends PureComponent\n{\n\tstatic propTypes =\n\t{\n\t\t// An optional label placed on top of the input field\n\t\tlabel : PropTypes.string,\n\n\t\t// `<input/>` placeholder\n\t\tplaceholder : PropTypes.string,\n\n\t\t// `0` means \"Sunday\", `1` means \"Monday\", etc.\n\t\t// (is `0` by default)\n\t\tfirstDayOfWeek : PropTypes.number.isRequired,\n\n\t\t// Date format. Only supports `DD`, `MM`, `YY` and `YYYY` for now (to reduce bundle size).\n\t\t// Can support custom localized formats, perhaps, when `date-fns@2` is released.\n\t\t// (is US `MM/DD/YYYY` by default)\n\t\tformat : PropTypes.string.isRequired,\n\t\t// format : PropTypes.oneOfType([PropTypes.string, PropTypes.object]).isRequired,\n\n\t\t// Internationalization\n\t\t// locale : PropTypes.string,\n\n\t\t// The Date `value`\n\t\tvalue : PropTypes.instanceOf(Date),\n\n\t\t// Writes new `value`.\n\t\t// The `value` is in the user's time zone and the time is `00:00`.\n\t\tonChange : PropTypes.func.isRequired,\n\n\t\t// Is called when the date picker is either collapsed or expanded\n\t\tonToggle : PropTypes.func,\n\n\t\t// Is called when the input is focused\n\t\tonFocus : PropTypes.func,\n\n\t\t// Is called when the input is blurred.\n\t\t// This `onBlur` interceptor is a workaround for `redux-form`,\n\t\t// so that it gets the parsed `value` in its `onBlur` handler,\n\t\t// not the formatted text.\n\t\tonBlur : PropTypes.func,\n\n\t\t// Disables the input\n\t\tdisabled : PropTypes.bool,\n\n\t\t// Set to `true` to mark the field as required\n\t\trequired : PropTypes.bool.isRequired,\n\n\t\t// HTML `<input/>` `name` attribute\n\t\tname : PropTypes.string,\n\n\t\t// How much years back can a user navigate using the year `<select/>`\n\t\tselectYearsIntoPast : PropTypes.number,\n\n\t\t// How much years forward can a user navigate using the year `<select/>`\n\t\tselectYearsIntoFuture : PropTypes.number,\n\n\t\t// Whether dates being selected should be in UTC+0 timezone.\n\t\t// (is `false` by default)\n\t\tutc : PropTypes.bool.isRequired,\n\n\t\t// Whether to set time to 12:00 for dates being selected.\n\t\t// (is `true` by default)\n\t\tnoon : PropTypes.bool.isRequired,\n\n\t\t// \"Close\" button title for fullscreen mode on mobile devices\n\t\tcloseButtonLabel : PropTypes.string.isRequired,\n\n\t\t// CSS class\n\t\tclassName : PropTypes.string,\n\n\t\t// CSS style object\n\t\tstyle : PropTypes.object\n\t}\n\n\tstatic defaultProps =\n\t{\n\t\t// Default US format\n\t\tformat : 'MM/DD/YYYY',\n\n\t\t// locale: 'en-US',\n\t\tfirstDayOfWeek : 0,\n\n\t\t// Set to `true` to mark the field as required\n\t\trequired : false,\n\n\t\t// Whether dates being selected should be in UTC+0 timezone\n\t\tutc : false,\n\n\t\t// Whether to set time to 12:00 for dates being selected\n\t\tnoon : true,\n\n\t\t// \"Close\" button title for fullscreen mode on mobile devices\n\t\tcloseButtonLabel : 'Close'\n\t}\n\n\tstate =\n\t{\n\t\texpanded     : false,\n\t\tselected_day : null\n\t}\n\n\tcomponentDidMount()\n\t{\n\t\tdocument.addEventListener('click', this.document_clicked)\n\n\t\t// Set \"previous\" and \"next\" buttons untabbable\n\t\t// so that a Tab out of the `<input/>` field\n\t\t// moves cursor not inside to these buttons\n\t\t// but rather to the next form input.\n\t\tconst calendar = ReactDOM.findDOMNode(this.calendar)\n\t\tfor (const button of calendar.querySelectorAll('.DayPicker-NavButton'))\n\t\t{\n\t\t\tbutton.removeAttribute('tabindex')\n\t\t}\n\t}\n\n\tcomponentWillUnmount()\n\t{\n\t\tdocument.removeEventListener('click', this.document_clicked)\n\t}\n\n\ton_input_focus = (event) =>\n\t{\n\t\tconst { onFocus } = this.props\n\n\t\tif (onFocus)\n\t\t{\n\t\t\tonFocus(event)\n\t\t}\n\n\t\tthis.expand()\n\t}\n\n\texpand = () =>\n\t{\n\t\tconst { expanded } = this.state\n\t\tconst { value, format, onToggle } = this.props\n\n\t\tif (expanded)\n\t\t{\n\t\t\treturn\n\t\t}\n\n\t\tthis.setState\n\t\t({\n\t\t\tmonth : undefined\n\t\t},\n\t\t() =>\n\t\t{\n\t\t\tif (onToggle)\n\t\t\t{\n\t\t\t\tonToggle(true)\n\t\t\t}\n\n\t\t\tthis.setState\n\t\t\t({\n\t\t\t\ttext_value : format_date(value, format),\n\t\t\t\texpanded   : true,\n\t\t\t\tmonth      : value ? normalize_value(value) : new Date()\n\t\t\t})\n\n\t\t\t// Could also focus on the calendar controls upon expansion\n\t\t\t// but it's configured to collapse on Tab event.\n\t\t\t// , () =>\n\t\t\t// {\n\t\t\t// \tReactDOM.findDOMNode(this.calendar).focus()\n\t\t\t// })\n\t\t})\n\t}\n\n\t// Would have used `onBlur={...}` event handler here\n\t// with `if (container.contains(event.relatedTarget))` condition,\n\t// but it doesn't work in IE in React.\n\t// https://github.com/facebook/react/issues/3751\n\t//\n\t// Therefore, using the hacky `document.onClick` handlers\n\t// and this `onKeyDown` Tab handler\n\t// until `event.relatedTarget` support is consistent in React.\n\t//\n\ton_key_down_in_container = (event) =>\n\t{\n\t\tif (event.ctrlKey || event.altKey || event.shiftKey || event.metaKey)\n\t\t{\n\t\t\treturn\n\t\t}\n\n\t\tconst { expanded } = this.state\n\n\t\tswitch (event.keyCode)\n\t\t{\n\t\t\t// Collapse on Escape or on Tab out\n\t\t\tcase 27:\n\t\t\t\tevent.preventDefault()\n\t\t\t\tthis.input.focus()\n\t\t\tcase 9:\n\t\t\t\tif (expanded)\n\t\t\t\t{\n\t\t\t\t\tthis.collapse()\n\t\t\t\t}\n\t\t\t\treturn\n\t\t}\n\t}\n\n\ton_input_key_down = (event) =>\n\t{\n\t\tif (event.ctrlKey || event.altKey || event.shiftKey || event.metaKey)\n\t\t{\n\t\t\treturn\n\t\t}\n\n\t\tconst { expanded } = this.state\n\n\t\tswitch (event.keyCode)\n\t\t{\n\t\t\t// Collapse on Escape and on Enter\n\t\t\tcase 27:\n\t\t\t\tevent.preventDefault()\n\t\t\tcase 13:\n\t\t\t\tif (expanded)\n\t\t\t\t{\n\t\t\t\t\tthis.collapse()\n\t\t\t\t}\n\t\t\t\treturn\n\n\t\t\t// Toggle the calendar on Spacebar\n\t\t\tcase 32:\n\t\t\t\tevent.preventDefault()\n\n\t\t\t\tif (expanded)\n\t\t\t\t{\n\t\t\t\t\tthis.collapse()\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.expand()\n\t\t\t\t}\n\n\t\t\t\treturn\n\n\t\t\t// Collapse the calendar (if expanded) on Up arrow\n\t\t\tcase 38:\n\t\t\t\tif (expanded)\n\t\t\t\t{\n\t\t\t\t\tevent.preventDefault()\n\t\t\t\t\tthis.collapse()\n\t\t\t\t}\n\t\t\t\treturn\n\n\t\t\t// Expand the calendar (if collapsed) on Down arrow\n\t\t\tcase 40:\n\t\t\t\tif (!expanded)\n\t\t\t\t{\n\t\t\t\t\tevent.preventDefault()\n\t\t\t\t\tthis.expand()\n\t\t\t\t}\n\t\t\t\treturn\n\t\t}\n\t}\n\n\t// Hides the day picker calendar and cancels textual date editing\n\tcollapse = () =>\n\t{\n\t\tconst { onToggle } = this.props\n\n\t\tif (onToggle)\n\t\t{\n\t\t\tonToggle(false)\n\t\t}\n\n\t\tthis.setState\n\t\t({\n\t\t\ttext_value : undefined,\n\t\t\texpanded   : false\n\t\t})\n\n\t\t// `onChange` fires on calendar day `click`\n\t\t// but the `value` hasn't neccessarily been updated yet,\n\t\t// therefore, say, if `value` was not set\n\t\t// and a user select a day in the calendar\n\t\t// then the `value` is technically still `undefined`\n\t\t// so can't just set `state.text_value = format_date(value)` here.\n\t\t//\n\t\t// Analogous, `setState({ text_value })` has been called\n\t\t// in calendar day `onClick` but `state.text_value`\n\t\t// hasn't neccessarily been updated yet.\n\t\t//\n\t\t// Still must validate (recompute) `text_value` on `<input/>` blur\n\t\t// in cases when a user manually typed in a date and then tabbed away.\n\t}\n\n\ton_input_change = (event) =>\n\t{\n\t\tconst\n\t\t{\n\t\t\tonChange,\n\t\t\tformat,\n\t\t\tnoon,\n\t\t\tutc\n\t\t}\n\t\t= this.props\n\n\t\tlet { value } = event.target\n\n\t\tvalue = value.trim()\n\n\t\t// When the date is erased, reset it.\n\t\tif (!value)\n\t\t{\n\t\t\tonChange(undefined)\n\t\t\treturn this.setState({ text_value: '' })\n\t\t}\n\n\t\tvalue = trim_invalid_part(value, format)\n\n\t\tconst selected_day = parse_date(value, format, noon, utc)\n\n\t\tif (!selected_day)\n\t\t{\n\t\t\treturn this.setState({ text_value: value })\n\t\t}\n\n\t\tonChange(selected_day)\n\n\t\tthis.setState\n\t\t({\n\t\t\ttext_value: value\n\t\t},\n\t\t() => this.calendar.showMonth(selected_day))\n\t}\n\n\ton_day_click = (selected_day) =>\n\t{\n\t\tconst\n\t\t{\n\t\t\tformat,\n\t\t\tonChange,\n\t\t\tnoon,\n\t\t\tutc\n\t\t}\n\t\t= this.props\n\n\t\t// https://github.com/gpbl/react-day-picker/issues/473\n\t\t// By default the `selected_day` has time\n\t\t// set to `12:00` of the current time zone.\n\t\t// These extra 12 hours do make sense and\n\t\t// do help make things less weird.\n\t\t//\n\t\t// These extra 12 hours are a hack to make things\n\t\t// a little bit less weird when rendering parsed dates.\n\t\t// E.g. if a date `Jan 1st, 2017` gets parsed as\n\t\t// `Jan 1st, 2017, 00:00 UTC+0` (England) then when displayed in the US\n\t\t// it would show up as `Dec 31st, 2016, 19:00 UTC-05` (Austin, Texas).\n\t\t// That would be weird for a website user.\n\t\t// Therefore this extra 12-hour padding is added\n\t\t// to compensate for the most weird cases like this\n\t\t// for adjacent countries / neighbours / same continent countries.\n\t\t//\n\t\t// So `selected_day` is in the user's time zone and the time is `12:00`.\n\n\t\tif (!noon)\n\t\t{\n\t\t\t// Here I strip those 12 hours from the `selected_day`\n\t\t\t// so the time becomes `00:00` in the user's time zone.\n\t\t\t//\n\t\t\t// (`selected_day` is the date in the user's time zone)\n\t\t\t// (`selected_day.getDate()` returns the day in the user's time zone)\n\t\t\t// (`new Date(year, month, day)` creates a date in the user's time zone)\n\t\t\t//\n\t\t\tselected_day = new Date(selected_day.getFullYear(), selected_day.getMonth(), selected_day.getDate())\n\t\t}\n\n\t\tif (utc)\n\t\t{\n\t\t\t// Converts timezone to UTC while preserving the same time\n\t\t\tselected_day = convert_to_utc_timezone(selected_day)\n\t\t}\n\n\t\t// `onChange` fires but the `value`\n\t\t// hasn't neccessarily been updated yet\n\t\tonChange(selected_day)\n\n\t\t// this.setState\n\t\t// ({\n\t\t// \t// text_value: format_date(selected_day, format),\n\t\t// \texpanded: false\n\t\t// })\n\n\t\t// // Blur the input so that the calendar\n\t\t// // will open upon a future click on it.\n\t\t// // (doesn't work in mobile browsers)\n\t\t// this.input.blur()\n\n\t\t// Hide the calendar\n\t\tthis.collapse()\n\n\t\t// Focus the `<input/>`\n\t\tthis.input.focus()\n\t}\n\n\ton_calendar_key_down = (event) =>\n\t{\n\t\tswitch (event)\n\t\t{\n\t\t\t// The next year is selected on \"Up\" arrow,\n\t\t\t// so `.preventDefault()` it to prevent page scrolling.\n\t\t\t// https://github.com/gpbl/react-day-picker/issues/273\n\t\t\tcase 38:\n\t\t\t\tevent.preventDefault()\n\t\t\t\treturn\n\n\t\t\t// The previous year is selected on \"Down\" arrow,\n\t\t\t// so `.preventDefault()` it to prevent page scrolling.\n\t\t\t// https://github.com/gpbl/react-day-picker/issues/273\n\t\t\tcase 40:\n\t\t\t\tevent.preventDefault()\n\t\t\t\treturn\n\t\t}\n\t}\n\n\tdocument_clicked = (event) =>\n\t{\n\t\tconst container = ReactDOM.findDOMNode(this.container)\n\n\t\tif (container.contains(event.target))\n\t\t{\n\t\t\treturn\n\t\t}\n\n\t\tthis.collapse()\n\t}\n\n\ton_month_selected = (month) =>\n\t{\n\t\tthis.setState({ month })\n\t}\n\n\t// Whether should indicate that the input value is invalid\n\tshould_indicate_invalid()\n\t{\n\t\tconst { indicateInvalid, error } = this.props\n\n\t\treturn indicateInvalid && error\n\t}\n\n\t// This handler is a workaround for `redux-form`\n\ton_blur = (event) =>\n\t{\n\t\tconst { onBlur, value } = this.props\n\n\t\t// If clicked on an expanded calendar then don't trigger \"blur\" event\n\t\tif (event.relatedTarget && event.currentTarget.contains(event.relatedTarget))\n\t\t{\n\t\t\treturn\n\t\t}\n\n\t\t// This `onBlur` interceptor is a workaround for `redux-form`,\n\t\t// so that it gets the right (parsed, not the formatted one)\n\t\t// `event.target.value` in its `onBlur` handler.\n\t\tif (onBlur)\n\t\t{\n\t\t\tconst _event =\n\t\t\t{\n\t\t\t\t...event,\n\t\t\t\ttarget:\n\t\t\t\t{\n\t\t\t\t\t...event.target,\n\t\t\t\t\tvalue\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// For `redux-form` event detection.\n\t\t\t// https://github.com/erikras/redux-form/blob/v5/src/events/isEvent.js\n\t\t\t_event.stopPropagation = event.stopPropagation\n\t\t\t_event.preventDefault  = event.preventDefault\n\n\t\t\tonBlur(_event)\n\t\t}\n\t}\n\n\trender()\n\t{\n\t\tconst\n\t\t{\n\t\t\tid,\n\t\t\tformat,\n\t\t\tvalue,\n\t\t\terror,\n\t\t\tselectYearsIntoPast,\n\t\t\tselectYearsIntoFuture,\n\t\t\tfirstDayOfWeek,\n\t\t\tdisabled,\n\t\t\trequired,\n\t\t\tlabel,\n\t\t\tplaceholder,\n\t\t\tcloseButtonLabel,\n\t\t\tclassName,\n\t\t\tstyle\n\t\t}\n\t\t= this.props\n\n\t\tconst\n\t\t{\n\t\t\ttext_value,\n\t\t\texpanded,\n\t\t\tmonth\n\t\t}\n\t\t= this.state\n\n\t\t// `<input type=\"date\"/>` renders a browser-specific date picker\n\t\t// which can not be turned off using a simple HTML attribute\n\t\t// and also date format is not customizable,\n\t\t// therefore just using `<input type=\"text\"/>` here\n\n\t\tlet captionElement\n\n\t\tif (selectYearsIntoPast || selectYearsIntoFuture)\n\t\t{\n\t\t\tcaptionElement = <YearMonthSelector\n\t\t\t\tselectedDay={ value }\n\t\t\t\tonChange={ this.on_month_selected }\n\t\t\t\tselectYearsIntoPast={ selectYearsIntoPast }\n\t\t\t\tselectYearsIntoFuture={ selectYearsIntoFuture } />\n\t\t}\n\n\t\treturn (\n\t\t\t<div\n\t\t\t\tref={ ref => this.container = ref }\n\t\t\t\tonKeyDown={ this.on_key_down_in_container }\n\t\t\t\tonBlur={ this.on_blur }\n\t\t\t\tclassName={ classNames('rrui__date-picker', className,\n\t\t\t\t{\n\t\t\t\t\t'rrui__date-picker--disabled' : disabled\n\t\t\t\t}) }\n\t\t\t\tstyle={ style }>\n\n\t\t\t\t<div className=\"rrui__input\">\n\t\t\t\t\t{/* This layer can intercept taps on mobile devices\n\t\t\t\t\t    to prevent the keyboard from showing\n\t\t\t\t\t    when the date picker is in fullscreen mode */}\n\t\t\t\t\t<div\n\t\t\t\t\t\tonClick={ this.expand }\n\t\t\t\t\t\tclassName=\"rrui__date-picker__input-overlay\"/>\n\n\t\t\t\t\t{/* Date input */}\n\t\t\t\t\t<input\n\t\t\t\t\t\tid={ id }\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tref={ ref => this.input = ref }\n\t\t\t\t\t\tplaceholder={ placeholder || (typeof format === 'string' ? format : undefined) }\n\t\t\t\t\t\tdisabled={ disabled }\n\t\t\t\t\t\tvalue={ text_value !== undefined ? text_value : format_date(value, format) }\n\t\t\t\t\t\tonKeyDown={ this.on_input_key_down }\n\t\t\t\t\t\tonChange={ this.on_input_change }\n\t\t\t\t\t\tonFocus={ this.on_input_focus }\n\t\t\t\t\t\tonClick={ this.expand }\n\t\t\t\t\t\tclassName={ classNames('rrui__input-element', 'rrui__input-field', 'rrui__date-picker__input',\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t'rrui__input-field--invalid' : this.should_indicate_invalid()\n\t\t\t\t\t\t}) }/>\n\n\t\t\t\t\t{/* Label */}\n\t\t\t\t\t{/* (this label is placed after the `<input/>`\n\t\t\t\t\t     to utilize the CSS `+` selector) */}\n\t\t\t\t\t{ label &&\n\t\t\t\t\t\t<label\n\t\t\t\t\t\t\thtmlFor={ id }\n\t\t\t\t\t\t\tclassName={ classNames('rrui__input-label',\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t'rrui__input-label--required' : required && !value,\n\t\t\t\t\t\t\t\t'rrui__input-label--invalid'  : this.should_indicate_invalid()\n\t\t\t\t\t\t\t}) }>\n\t\t\t\t\t\t\t{ label }\n\t\t\t\t\t\t</label>\n\t\t\t\t\t}\n\n\t\t\t\t\t{/* <DayPicker/> doesn't support `style` property */}\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={ classNames\n\t\t\t\t\t\t(\n\t\t\t\t\t\t\t'rrui__expandable',\n\t\t\t\t\t\t\t'rrui__expandable--overlay',\n\t\t\t\t\t\t\t'rrui__shadow',\n\t\t\t\t\t\t\t'rrui__date-picker__collapsible',\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t'rrui__expandable--expanded' : expanded\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t) }>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={ classNames\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\t'rrui__expandable__content',\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t// CSS selector performance optimization\n\t\t\t\t\t\t\t\t\t'rrui__expandable__content--expanded'   : expanded\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t) }>\n\t\t\t\t\t\t\t<DayPicker\n\t\t\t\t\t\t\t\tref={ ref => this.calendar = ref }\n\t\t\t\t\t\t\t\tmonth={ month }\n\t\t\t\t\t\t\t\tfirstDayOfWeek={ firstDayOfWeek }\n\t\t\t\t\t\t\t\tonDayClick={ this.on_day_click }\n\t\t\t\t\t\t\t\tonKeyDown={ this.on_calendar_key_down }\n\t\t\t\t\t\t\t\tselectedDays={ normalize_value(value) }\n\t\t\t\t\t\t\t\tcaptionElement={ captionElement }\n\t\t\t\t\t\t\t\ttabIndex={ -1 }\n\t\t\t\t\t\t\t\tclassName=\"rrui__date-picker__calendar\" />\n\n\t\t\t\t\t\t\t{/* \"Close\" button for fullscreen mode on mobile devices */}\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\tonClick={ this.collapse }\n\t\t\t\t\t\t\t\tclassName=\"rrui__date-picker__close\">\n\t\t\t\t\t\t\t\t{ closeButtonLabel }\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t{/* Error message */}\n\t\t\t\t{ this.should_indicate_invalid() &&\n\t\t\t\t\t<div className=\"rrui__input-error\">{ error }</div>\n\t\t\t\t}\n\t\t\t</div>\n\t\t)\n\t}\n}\n\n// Parses a text value into a `Date` provided a `format`.\n// The date returned is in the user's time zone and the time is `12:00`.\nfunction parse_date(text_value, format, noon, utc)\n{\n\tif (!text_value)\n\t{\n\t\treturn\n\t}\n\n\t// Custom\n\treturn parse_date_custom(text_value, format, noon, utc)\n\n\t// // Using `date-fns`\n\t// const date = parse_date_date_fns(text_value)\n\n\t// if (isNaN(date.getTime()))\n\t// {\n\t// \treturn\n\t// }\n\n\t// return date\n\n\t// // Using `Moment.js`\n\t// const moment_day = moment(text_value, format, true)\n\n\t// if (!moment_day.isValid())\n\t// {\n\t// \treturn\n\t// }\n\n\t// return moment_day.toDate()\n}\n\n// (Moment.js)\n// Formats a `Date` into a text value provided a `format`\nfunction format_date(date, format)\n{\n\tif (!date)\n\t{\n\t\treturn ''\n\t}\n\n\t// Custom\n\treturn format_date_custom(date, format)\n\n\t// // Using `date-fns`\n\t// return format_date_date_fns(date, format)\n\n\t// // Using `Moment.js`\n\t// return moment(date).format(format)\n}\n\n// Parses a text value into a `Date` provided a `format`.\n// The date returned is in the user's time zone and the time is `00:00`.\nfunction parse_date_custom(string, format, noon, utc)\n{\n\tif (!string)\n\t{\n\t\treturn\n\t}\n\n\tlet year = extract(string, format, 'YYYY')\n\n\tif (year === undefined)\n\t{\n\t\tyear = extract(string, format, 'YY')\n\n\t\tif (year !== undefined)\n\t\t{\n\t\t\t// Current year in the user's time zone.\n\t\t\tconst current_year = new Date().getFullYear()\n\t\t\tconst current_year_century = current_year - current_year % 100\n\t\t\tyear += current_year_century\n\t\t}\n\t}\n\n\tconst month = extract(string, format, 'MM')\n\tconst day   = extract(string, format, 'DD')\n\n\tif (year === undefined || month === undefined || day === undefined)\n\t{\n\t\treturn console.error(`Couldn't parse date. Most likely an invalid date entered (manually). Otherwise it could be an unsupported date format: ${format} (only DD, MM, YY and YYYY literals are supported).`)\n\t}\n\n\t// The date created is in the user's time zone and the time is `00:00`.\n\tlet date = new Date\n\t(\n\t\tyear,\n\t\tmonth - 1,\n\t\tday,\n\t\tnoon ? 12 : undefined\n\t)\n\n\tif (utc)\n\t{\n\t\t// Converts timezone to UTC while preserving the same time\n\t\tdate = convert_to_utc_timezone(date)\n\t}\n\n\t// If `new Date()` returns \"Invalid Date\"\n\t// (sometimes it does)\n\tif (isNaN(date.getTime()))\n\t{\n\t\treturn\n\t}\n\n\treturn date\n}\n\nfunction extract(string, template, piece)\n{\n\tconst starts_at = template.indexOf(piece)\n\n\tif (starts_at < 0)\n\t{\n\t\treturn\n\t}\n\n\t// Check overall sanity\n\tif (!corresponds_to_template(string, template))\n\t{\n\t\treturn\n\t}\n\n\tconst number = parseInt(string.slice(starts_at, starts_at + piece.length))\n\n\tif (!isNaN(number))\n\t{\n\t\treturn number\n\t}\n}\n\nfunction corresponds_to_template(string, template)\n{\n\tif (string.length !== template.length)\n\t{\n\t\treturn false\n\t}\n\n\tlet i = 0\n\twhile (i < string.length)\n\t{\n\t\tconst is_a_digit = string[i] >= '0' && string[i] <= '9'\n\n\t\tif (!is_a_digit)\n\t\t{\n\t\t\tif (string[i] !== template[i])\n\t\t\t{\n\t\t\t\treturn false\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (template[i] !== 'D' && template[i] !== 'M' && template[i] !== 'Y')\n\t\t\t{\n\t\t\t\treturn false\n\t\t\t}\n\t\t}\n\n\t\ti++\n\t}\n\n\treturn true\n}\n\n// console.log(corresponds_to_template('1231231234', 'DD.MM.YYYY'))\n// console.log(corresponds_to_template('12.12.1234', 'DD.MM.YYYY'))\n\n// console.log(parse_date_custom('fadsfasd', 'DD.MM.YYYY'))\n// console.log(parse_date_custom('28.02.2017', 'DD.MM.YYYY'))\n// console.log(parse_date_custom('12/02/2017', 'MM/DD/YYYY'))\n// console.log(parse_date_custom('99/99/2017', 'MM/DD/YYYY'))\n// console.log(parse_date_custom('02/03/17', 'MM/DD/YY'))\n\nfunction format_date_custom(date, format)\n{\n\tif (!(date instanceof Date))\n\t{\n\t\treturn\n\t}\n\n\tconst day   = date.getDate()\n\tconst month = date.getMonth() + 1\n\tconst year  = date.getFullYear()\n\n\tlet text = format\n\t\t.replace('DD', pad_with_zeroes(String(day),   2))\n\t\t.replace('MM', pad_with_zeroes(String(month), 2))\n\n\tif (text.indexOf('YYYY') >= 0)\n\t{\n\t\treturn text.replace('YYYY', pad_with_zeroes(String(year), 4))\n\t}\n\n\tif (text.indexOf('YY') >= 0)\n\t{\n\t\treturn text.replace('YY', pad_with_zeroes(String(year % 100), 2))\n\t}\n}\n\n// console.log(format_date_custom(new Date(), 'DD.MM.YYYY'))\n// console.log(format_date_custom(new Date(), 'MM/DD/YYYY'))\n// console.log(format_date_custom(new Date(), 'MM/DD/YY'))\n\nfunction pad_with_zeroes(string, target_length)\n{\n\twhile (string.length < target_length)\n\t{\n\t\tstring = '0' + string\n\t}\n\n\treturn string\n}\n\n// // Intl date formatting\n//\n// const dateFormatters = {}\n//\n// function format_dateIntl(date, locale) {\n//   if (typeof Intl === 'undefined') {\n//     return date.toISOString()\n//   }\n//\n//   const key = typeof locale === 'string' ? locale : locale.join(',')\n//\n//   if (!dateFormatters[key]) {\n//     dateFormatters[key] = new Intl.DateTimeFormat(locale, {\n//       day: '2-digit',\n//       month: '2-digit',\n//       year: 'numeric'\n//     })\n//   }\n//\n//   return dateFormatters[key]\n// }\n\n// Converts `null` to `undefined`\n// (specially for `knex.js`)\nfunction normalize_value(value)\n{\n\tif (value === null)\n\t{\n\t\treturn undefined\n\t}\n\n\treturn value\n}\n\nfunction trim_invalid_part(value, format)\n{\n\tlet i = 0\n\twhile (i < value.length && i < format.length)\n\t{\n\t\tif (format[i] === 'D' || format[i] === 'M' || format[i] === 'Y')\n\t\t{\n\t\t\tif (!(value[i] >= '0' && value[i] <= '9'))\n\t\t\t{\n\t\t\t\tbreak\n\t\t\t}\n\t\t}\n\t\telse if (format[i] !== value[i])\n\t\t{\n\t\t\tbreak\n\t\t}\n\t\ti++\n\t}\n\n\treturn value.slice(0, i)\n}\n\n// console.log(trim_invalid_part('fasdf', 'DD.MM.YYYY'))\n// console.log(trim_invalid_part('01.01.1234', 'DD.MM.YYYY'))\n// console.log(trim_invalid_part('01/02/34', 'MM/DD/YY'))\n// console.log(trim_invalid_part('01/a2/34', 'MM/DD/YY'))\n\n// http://react-day-picker.js.org/examples/?yearNavigation\n// Component will receive date, locale and localeUtils props\nfunction YearMonthSelector({ date, localeUtils, onChange, selectYearsIntoPast, selectYearsIntoFuture, selectedDay })\n{\n\t// The current year in the user's time zone.\n\tconst current_year = new Date().getFullYear()\n\n\tlet from_year = selectYearsIntoPast   ? current_year - selectYearsIntoPast   : current_year\n\tconst to_year = selectYearsIntoFuture ? current_year + selectYearsIntoFuture : current_year\n\n\tconst years = new Array(to_year - from_year + 1)\n\n\tlet i = 0\n\twhile (from_year + i <= to_year)\n\t{\n\t\tyears[i] = from_year + i\n\t\ti++\n\t}\n\n\t// Makes sure the currently selected year is in the list\n\t// to not confuse the user.\n\tif (selectedDay)\n\t{\n\t\tconst selected_year = selectedDay.getFullYear()\n\n\t\tif (selected_year < from_year)\n\t\t{\n\t\t\tyears.unshift(selected_year)\n\t\t}\n\t\telse if (selected_year > to_year)\n\t\t{\n\t\t\tyears.push(selected_year)\n\t\t}\n\t}\n\n\tconst months = localeUtils.getMonths()\n\n\tfunction handleChange(event)\n\t{\n\t\tconst month = event.target.parentNode.firstChild.value\n\t\tconst year  = event.target.parentNode.lastChild.value\n\n\t\t// The date created is in the user's time zone and the time is `00:00`.\n\t\t// The `day` is `undefined` which means the first one of the `month`.\n\t\tonChange(new Date(year, month))\n\t}\n\n\tconst markup =\n\t(\n\t\t<div className=\"DayPicker-Caption\">\n\t\t\t<div className=\"DayPicker-CaptionSelects\">\n\t\t\t\t<select\n\t\t\t\t\tonChange={ handleChange }\n\t\t\t\t\tvalue={ date.getMonth() }\n\t\t\t\t\ttabIndex={ -1 }\n\t\t\t\t\tclassName=\"DayPicker-MonthSelect\">\n\n\t\t\t\t\t{ months.map((month, i) => (\n\t\t\t\t\t\t<option key={ i } value={ i }>\n\t\t\t\t\t\t\t{ month }\n\t\t\t\t\t\t</option>\n\t\t\t\t\t)) }\n\t\t\t\t</select>\n\n\t\t\t\t<select\n\t\t\t\t\tonChange={ handleChange }\n\t\t\t\t\tvalue={ date.getFullYear() }\n\t\t\t\t\ttabIndex={ -1 }\n\t\t\t\t\tclassName=\"DayPicker-YearSelect\">\n\n\t\t\t\t\t{ years.map((year, i) => (\n\t\t\t\t\t\t<option key={ i } value={ year }>\n\t\t\t\t\t\t\t{ year }\n\t\t\t\t\t\t</option>\n\t\t\t\t\t)) }\n\t\t\t\t</select>\n\t\t\t</div>\n\t\t</div>\n\t)\n\n\treturn markup\n}\n\n// Converts timezone to UTC while preserving the same time\nfunction convert_to_utc_timezone(date)\n{\n\t// Doesn't account for leap seconds but I guess that's ok\n\t// given that javascript's own `Date()` does not either.\n\t// https://www.timeanddate.com/time/leap-seconds-background.html\n\t//\n\t// https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Date/getTimezoneOffset\n\t//\n\treturn new Date(date.getTime() - date.getTimezoneOffset() * 60 * 1000)\n}"]}